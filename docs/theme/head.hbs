<!-- Custom Head with Mermaid Support -->
<script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: false });

    document.addEventListener('DOMContentLoaded', async () => {
        const elements = document.querySelectorAll('code.language-mermaid');
        for (const element of elements) {
            const pre = element.parentElement;
            const div = document.createElement('div');
            div.classList.add('mermaid');
            div.textContent = element.textContent;
            pre.replaceWith(div);
        }
        await mermaid.run({
            querySelector: '.mermaid'
        });
    });
</script>
